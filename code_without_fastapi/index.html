<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio - Assami Baga</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --light: #ecf0f1;
            --dark: #1a252f;
            --text: #333;
            --danger: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        body { background-color: #f4f7f6; color: var(--text); line-height: 1.6; min-height: 100vh; }

        /* --- GOOGLE TRANSLATE --- */
        .translate-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            background: white;
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid #eee;
        }
        .goog-te-gadget-simple { background-color: transparent !important; border: none !important; padding: 0 !important; font-size: 14px !important; }
        .goog-te-banner-frame { display: none !important; }
        body { top: 0 !important; }

        /* --- ADMIN CONTROLS --- */
        .admin-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1000;
            align-items: flex-end;
        }

        .fab-btn {
            background: var(--accent);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s;
            border: none;
            font-size: 1.2rem;
        }
        .fab-btn:hover { transform: scale(1.1); }

        #save-btn, #pass-btn { display: none; }
        #save-btn { background: var(--success); }
        #pass-btn { background: var(--warning); }
        
        /* Edit Mode Styles */
        .editable { border: 1px dashed var(--accent); background: rgba(52, 152, 219, 0.05); padding: 2px; transition: background 0.2s; }
        .editable:focus { background: white; outline: 2px solid var(--accent); border: none; }

        /* Action Buttons */
        .btn-action { display: none; cursor: pointer; border: none; color: white; border-radius: 5px; padding: 5px 10px; font-size: 0.8rem; margin-top: 5px; }
        .btn-delete { background-color: var(--danger); position: absolute; right: -10px; top: -10px; border-radius: 50%; width: 25px; height: 25px; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .btn-add { background-color: var(--success); width: 100%; margin-top: 15px; padding: 10px; display: none; text-align: center; }
        .btn-add:hover { background-color: #219150; }
        
        body.editing .btn-delete { display: flex; z-index: 10; }
        body.editing .btn-add { display: block; }
        body.editing .timeline-item, body.editing .category-box, body.editing .skill-tag-wrapper, body.editing .project-card, body.editing .cert-item { border: 1px solid #ddd; padding: 10px; margin-bottom: 20px; border-radius: 8px; background: #fff; }
        body.editing #save-btn { display: flex; }
        body.editing #pass-btn { display: flex; }

        /* --- LAYOUT --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; display: grid; grid-template-columns: 300px 1fr; gap: 30px; padding-top: 80px; }
        @media (max-width: 768px) { .container { grid-template-columns: 1fr; } }

        /* Sidebar */
        .sidebar { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); text-align: center; }
        .profile-wrapper { position: relative; display: inline-block; width: 150px; height: 150px; margin-bottom: 20px; }
        .profile-img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 4px solid var(--accent); }
        .upload-btn { position: absolute; bottom: 5px; right: 5px; background: var(--primary); color: white; width: 35px; height: 35px; border-radius: 50%; display: none; align-items: center; justify-content: center; cursor: pointer; border: 2px solid white; }
        body.editing .upload-btn { display: flex; }

        .name { font-size: 1.8rem; color: var(--primary); font-weight: 700; margin-bottom: 5px; }
        .title { font-size: 1rem; color: var(--accent); font-weight: 600; margin-bottom: 20px; }
        
        .contact-info { text-align: left; margin-top: 20px; font-size: 0.9rem; }
        .contact-item { margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .contact-item i { color: var(--accent); width: 20px; }

        /* CV DOWNLOAD BUTTON */
        .cv-download-wrapper { margin-top: 20px; margin-bottom: 20px; }
        .btn-cv {
            display: inline-flex; align-items: center; gap: 10px;
            background: var(--primary); color: white;
            padding: 10px 20px; border-radius: 30px;
            text-decoration: none; font-weight: bold;
            transition: all 0.3s; border: 2px solid var(--primary);
            cursor: pointer;
        }
        .btn-cv:hover { background: transparent; color: var(--primary); }
        .btn-cv.upload-mode { background: var(--warning); border-color: var(--warning); }
        .btn-cv.upload-mode:hover { background: transparent; color: var(--warning); }

        .skills-list { text-align: left; margin-top: 30px; display: flex; flex-wrap: wrap; gap: 5px; }
        .skill-tag { background: var(--light); color: var(--dark); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; }
        .skill-tag-wrapper { position: relative; display: inline-block; } 

        /* Main Content */
        .main-content { display: flex; flex-direction: column; gap: 30px; }
        .section { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .section-title { font-size: 1.4rem; color: var(--primary); border-bottom: 2px solid var(--light); padding-bottom: 10px; margin-bottom: 20px; }
        
        .timeline-item { border-left: 3px solid var(--accent); padding-left: 20px; margin-bottom: 25px; position: relative; }
        body.editing .timeline-item { border-left: none; }
        .job-title { font-weight: bold; font-size: 1.1rem; }
        .company { color: #666; font-style: italic; font-size: 0.95rem; margin-bottom: 5px; }
        .date { font-size: 0.85rem; color: #999; margin-bottom: 10px; display: block; }
        .description ul { list-style-position: inside; margin-top: 5px; }
        
        .category-box { margin-bottom: 20px; position: relative; }
        .category-title { font-weight: bold; color: var(--primary); margin-bottom: 5px; }
        .status-badge { background: #27ae60; color: white; padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; display: inline-block; margin-bottom: 15px;}

        /* --- PROJECTS GRID --- */
        .project-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .project-card { background: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid #eee; position: relative; display: flex; flex-direction: column; justify-content: space-between; }
        .project-header h3 { font-size: 1.1rem; color: var(--primary); margin-bottom: 5px; display: flex; align-items: center; gap: 8px; }
        .project-desc { font-size: 0.9rem; color: #555; margin-bottom: 15px; }
        .project-tech { font-size: 0.8rem; color: var(--accent); margin-bottom: 15px; font-style: italic; }
        .project-link { text-decoration: none; background: var(--accent); color: white; padding: 5px 15px; border-radius: 5px; font-size: 0.85rem; display: inline-block; text-align: center; width: fit-content;}
        .project-link:hover { background: var(--primary); }

        /* --- CERTIFICATIONS LIST --- */
        .cert-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .cert-item { background: #f9f9f9; padding: 15px; border-radius: 8px; display: flex; flex-direction: column; gap: 10px; position: relative; border-left: 4px solid var(--accent); }
        .cert-name { font-weight: 600; font-size: 0.95rem; }
        .cert-link { font-size: 0.8rem; color: var(--accent); text-decoration: none; display: flex; align-items: center; gap: 5px; }
        .cert-link:hover { text-decoration: underline; }

    </style>
</head>
<body>

    <div class="translate-container">
        <div id="google_translate_element"></div>
    </div>

    <div id="app">
        </div>

    <div class="admin-controls">
        <button id="pass-btn" class="fab-btn" onclick="changePassword()" title="Changer le mot de passe">
            <i class="fas fa-key"></i>
        </button>
        <button id="save-btn" class="fab-btn" onclick="exportData()" title="Sauvegarder les donn√©es (Copier le code)">
            <i class="fas fa-save"></i>
        </button>
        <button class="fab-btn" onclick="toggleEditMode()" title="Admin Login">
            <i class="fas fa-pen"></i>
        </button>
    </div>

    <script>
        // ==========================================
        // 1. DATA OBJECT
        // ==========================================
        let cvData = {
            personal: {
                name: "Assami BAGA",
                title: "Ing√©nieur IA & Full Stack",
                availability: "Disponible d√®s octobre 2026",
                email: "bagaassami09@gmail.com",
                phone: "07 53 49 67 71",
                location: "Thiais (94320), Ile de france",
                linkedin: "assami-baga",
                social: "bagus_full_stack",
                summary: "√âtudiant en derni√®re ann√©e du cycle d'ing√©nieur en informatique √† l'EILCO, je suis √† la recherche active d'un CDI. Mon objectif est d'exploiter ma passion pour la technologie en participant √† la conception et au d√©veloppement d'applications de haute qualit√©."
            },
            softSkills: ["Polyvalence", "Efficacit√©", "Cr√©ativit√©", "Adaptabilit√©", "Collaboration", "Autonomie", "Curiosit√©"],
            languages: ["Fran√ßais", "Anglais"],
            education: [
                { degree: "Dipl√¥me d'ing√©nieur en Ing√©nierie Logicielle et IA", school: "EILCO, Calais, France", date: "Depuis septembre 2023" },
                { degree: "Certifications: PUPA, LCB-FT, HDS, ISO 27001", school: "CDC Informatique, Bagneux", date: "Jan 2025 - D√©c 2025" },
                { degree: "RGPD, Protection des donn√©es, S√©curit√© incendie", school: "CDC Informatique, Bagneux", date: "Jan 2024 - D√©c 2024" },
                { degree: "Technologie IP, SQL, Linux, Scripting Shell", school: "Essitech, Ouagadougou", date: "Juin 2023" },
                { degree: "Licence en Ing√©nierie des Syst√®mes d'Information", school: "ESI, Burkina Faso", date: "Oct 2019 - F√©v 2023" }
            ],
            experience: [
                {
                    role: "Ing√©nieur Exploitation",
                    company: "CDC Informatique, Bagneux",
                    date: "Depuis septembre 2024",
                    tasks: ["Participer √† un travail collaboratif", "R√©alisation de PYMQCOPY", "R√©alisation d'un R√©f√©rentiel des Services Flux (en cours)"]
                },
                {
                    role: "B√©n√©volat (Accompagnement scolaire)",
                    company: "AFEV Calais",
                    date: "Sept 2023 - Sept 2024",
                    tasks: ["Accompagnement des jeunes en difficult√© scolaire", "Cr√©ation de lien dans les quartiers populaires"]
                },
                {
                    role: "Software Engineer",
                    company: "Orange & Smile, Ouagadougou",
                    date: "Sept 2022 - Sept 2023",
                    tasks: ["D√©veloppement d'un Syst√®me Intelligent de Conception des Produits", "Participation au d√©veloppement de MySpace (Frontend)", "Participation au d√©veloppement de BourseFondation (Backend)"]
                }
            ],
            techSkills: [
                { cat: "Dev Multiplateforme", tools: "HTML, CSS, JS, TS, SASS, Bootstrap, Tailwind, WordPress, Flutter Flow, Java, Pygame, JavaFX, Angular, React, Kotlin, Docker" },
                { cat: "API RESTFUL", tools: "NodeJS, ExpressJS, Spring, FastAPI, Laravel, Keycloak, JWT, Postman, Git, Swagger" },
                { cat: "Conception & Modeling", tools: "UML, Merise, Scrum, Power AMC, Adobe XD, Figma, JSON, XML" },
                { cat: "Data & AI", tools: "CNN, RNN, TensorFlow, Scikit-learn, PyTorch, YOLO, Pandas, NumPy, Matplotlib, Power BI" },
                { cat: "Databases", tools: "MySQL, MariaDB, PostgreSQL, Oracle Database, SQL Server" },
                { cat: "Languages", tools: "C, Java, Javascript, Python, R, PHP, Kotlin, Bash, Arduino, VHDL" }
            ],
            projects: [
                { name: "Blue Attendance", desc: "Liste de pr√©sence √©lectronique via Bluetooth (App Mobile).", tech: "Java, Xml, FastAPI, Android Studio", link: "#" },
                { name: "PNP+", desc: "Syst√®me Intelligent de Conception des Produits et Promotions.", tech: "Angular, Spring boot, SQL", link: "#" },
                { name: "Myspace", desc: "Plateforme SaaS compl√®te.", tech: "React, Node.js, PostgreSQL", link: "#" },
                { name: "BourseFondation", desc: "Plateforme SaaS compl√®te.", tech: "React, Node.js, PostgreSQL", link: "#" },
                { name: "UI Calculator", desc: "Application web UI UX Design.", tech: "HTML, CSS, SCSS", link: "#" },
                { name: "UI Keyboard", desc: "Application web UI UX Design.", tech: "HTML, CSS, SCSS", link: "#" },
                { name: "Projet IOT", desc: "Plateforme SaaS compl√®te IOT.", tech: "React, Node.js, PostgreSQL", link: "#" },
                { name: "ESI Website", desc: "Site web statique de l'ESI.", tech: "HTML, CSS, Bootstrap", link: "#" },
                { name: "Checkers Game", desc: "Jeu de dames en mode console.", tech: "C, Linux", link: "#" },
                { name: "Todo List", desc: "Todo-list avec auth et email verification.", tech: "PHP, Laravel, Voyager", link: "#" },
                { name: "Technology Transfer", desc: "Plateforme de transfert de technologies.", tech: "HTML, CSS, Bootstrap, MySql", link: "#" },
                { name: "Spare", desc: "Suivi budg√©taire (synchro bancaire).", tech: "React, Node.js, Firebase", link: "#" },
                { name: "PYMQCOPY", desc: "Recopie de messages MQ source vers destinations.", tech: "Python, MQ Series, Bash", link: "#" }
            ],
            certifications: [
                { name: "C", link: "#" },
                { name: "HTML", link: "#" },
                { name: "CSS", link: "#" },
                { name: "Javascript", link: "#" },
                { name: "Java", link: "#" },
                { name: "PHP", link: "#" },
                { name: "SQL", link: "#" },
                { name: "Python for Beginner", link: "#" },
                { name: "Python Data Structures", link: "#" },
                { name: "Coding marketers", link: "#" },
                { name: "Responsive Web Design", link: "#" },
                { name: "Intro r√©f√©rentiel HDS & ISO 27001", link: "#" },
                { name: "Sensibilisation PUPA", link: "#" },
                { name: "Fondamentaux de la LCB-FT", link: "#" },
                { name: "RGPD - Protection donn√©es", link: "#" },
                { name: "Classification et protection donn√©es", link: "#" },
                { name: "D√©ontologie code", link: "#" },
                { name: "Evacuation et s√©curit√© incendie", link: "#" }
            ]
        };

        // ==========================================
        // 2. STATE MANAGEMENT
        // ==========================================
        let isEditMode = false;
        
        // DEFAULT PASSWORD HASH (SHA-256 for "admin123")
        // If LocalStorage has a custom hash, we use that instead.
        let adminHash = localStorage.getItem('adminHash') || "240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9"; 

        function updatePersonal(field, value) { cvData.personal[field] = value; }
        
        function updateArrayItem(arrayName, index, field, value) {
            if(field) {
                cvData[arrayName][index][field] = value;
            } else {
                cvData[arrayName][index] = value;
            }
        }

        function updateTask(expIndex, taskIndex, value) {
            cvData.experience[expIndex].tasks[taskIndex] = value;
        }

        // ==========================================
        // 3. CRUD ACTIONS
        // ==========================================
        
        function addItem(type) {
            if (type === 'experience') {
                cvData.experience.unshift({ role: "Nouveau Poste", company: "Entreprise", date: "Date", tasks: ["Nouvelle t√¢che"] });
            } else if (type === 'education') {
                cvData.education.unshift({ degree: "Nouveau Dipl√¥me", school: "√âcole", date: "Date" });
            } else if (type === 'techSkills') {
                cvData.techSkills.push({ cat: "Nouvelle Cat√©gorie", tools: "Outils..." });
            } else if (type === 'softSkills') {
                cvData.softSkills.push("Nouvelle comp√©tence");
            } else if (type === 'languages') {
                cvData.languages.push("Nouvelle langue");
            } else if (type === 'projects') {
                cvData.projects.unshift({ name: "Nouveau Projet", desc: "Description...", tech: "Tech Stack", link: "#" });
            } else if (type === 'certifications') {
                cvData.certifications.unshift({ name: "Nouvelle Certification", link: "#" });
            }
            render();
        }

        function deleteItem(type, index) {
            if(!confirm("√ätes-vous s√ªr de vouloir supprimer cet √©l√©ment ?")) return;
            
            if (type === 'experience') cvData.experience.splice(index, 1);
            else if (type === 'education') cvData.education.splice(index, 1);
            else if (type === 'techSkills') cvData.techSkills.splice(index, 1);
            else if (type === 'softSkills') cvData.softSkills.splice(index, 1);
            else if (type === 'languages') cvData.languages.splice(index, 1);
            else if (type === 'projects') cvData.projects.splice(index, 1);
            else if (type === 'certifications') cvData.certifications.splice(index, 1);
            
            render();
        }

        // ==========================================
        // 4. RENDER FUNCTION
        // ==========================================
        function render() {
            const app = document.getElementById('app');
            const editClass = isEditMode ? 'editable' : '';
            const contentEditable = isEditMode ? 'contenteditable="true"' : '';

            const delBtn = (type, index) => 
                `<button class="btn-action btn-delete" onclick="deleteItem('${type}', ${index})"><i class="fas fa-trash"></i></button>`;

            app.innerHTML = `
                <div class="container">
                    <aside class="sidebar">
                        <div class="profile-wrapper">
                            <img src="https://via.placeholder.com/150" alt="Profile" id="profile-img" class="profile-img">
                            <label for="photo-upload" class="upload-btn"><i class="fas fa-camera"></i></label>
                            <input type="file" id="photo-upload" accept="image/*" style="display:none">
                        </div>
                        
                        <h1 class="name ${editClass}" ${contentEditable} oninput="updatePersonal('name', this.innerText)">${cvData.personal.name}</h1>
                        <p class="title ${editClass}" ${contentEditable} oninput="updatePersonal('title', this.innerText)">${cvData.personal.title}</p>
                        <div class="status-badge ${editClass}" ${contentEditable} oninput="updatePersonal('availability', this.innerText)">${cvData.personal.availability}</div>
                        
                        <div class="contact-info">
                            <div class="contact-item"><i class="fas fa-envelope"></i> <span class="${editClass}" ${contentEditable} oninput="updatePersonal('email', this.innerText)">${cvData.personal.email}</span></div>
                            <div class="contact-item"><i class="fas fa-phone"></i> <span class="${editClass}" ${contentEditable} oninput="updatePersonal('phone', this.innerText)">${cvData.personal.phone}</span></div>
                            <div class="contact-item"><i class="fas fa-map-marker-alt"></i> <span class="${editClass}" ${contentEditable} oninput="updatePersonal('location', this.innerText)">${cvData.personal.location}</span></div>
                            <div class="contact-item"><i class="fab fa-linkedin"></i> <span class="${editClass}" ${contentEditable} oninput="updatePersonal('linkedin', this.innerText)">${cvData.personal.linkedin}</span></div>
                        </div>

                        <div class="cv-download-wrapper">
                            <a href="#" id="cv-download-btn" class="btn-cv ${isEditMode ? 'upload-mode' : ''}" ${isEditMode ? 'onclick="document.getElementById(\'cv-upload\').click(); return false;"' : 'download="CV_Assami_BAGA.pdf"'}>
                                <i class="fas ${isEditMode ? 'fa-file-upload' : 'fa-download'}"></i> 
                                ${isEditMode ? 'Uploader CV (PDF)' : 'T√©l√©charger mon CV'}
                            </a>
                            <input type="file" id="cv-upload" accept="application/pdf" style="display:none">
                        </div>

                        <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
                        
                        <h3>Atouts</h3>
                        <div class="skills-list">
                            ${cvData.softSkills.map((s, i) => `
                                <div class="skill-tag-wrapper">
                                    <span class="skill-tag ${editClass}" ${contentEditable} oninput="updateArrayItem('softSkills', ${i}, null, this.innerText)">${s}</span>
                                    ${delBtn('softSkills', i)}
                                </div>
                            `).join('')}
                        </div>
                        <button class="btn-action btn-add" onclick="addItem('softSkills')"><i class="fas fa-plus"></i> Ajouter</button>

                        <h3 style="margin-top:20px">Langues</h3>
                        <div class="skills-list">
                            ${cvData.languages.map((s, i) => `
                                <div class="skill-tag-wrapper">
                                    <span class="skill-tag ${editClass}" ${contentEditable} oninput="updateArrayItem('languages', ${i}, null, this.innerText)">${s}</span>
                                    ${delBtn('languages', i)}
                                </div>
                            `).join('')}
                        </div>
                        <button class="btn-action btn-add" onclick="addItem('languages')"><i class="fas fa-plus"></i> Ajouter</button>
                    </aside>

                    <main class="main-content">
                        <section class="section">
                            <h2 class="section-title">√Ä propos de moi</h2>
                            <p class="${editClass}" ${contentEditable} oninput="updatePersonal('summary', this.innerText)">${cvData.personal.summary}</p>
                        </section>

                        <section class="section">
                            <h2 class="section-title">üèÜ Projets Phares</h2>
                            <div class="project-grid">
                                ${cvData.projects.map((proj, i) => `
                                    <div class="project-card">
                                        ${delBtn('projects', i)}
                                        <div class="project-header">
                                            <h3 class="${editClass}" ${contentEditable} oninput="updateArrayItem('projects', ${i}, 'name', this.innerText)">
                                                <i class="fas fa-robot"></i> ${proj.name}
                                            </h3>
                                        </div>
                                        <p class="project-desc ${editClass}" ${contentEditable} oninput="updateArrayItem('projects', ${i}, 'desc', this.innerText)">${proj.desc}</p>
                                        <div class="project-tech ${editClass}" ${contentEditable} oninput="updateArrayItem('projects', ${i}, 'tech', this.innerText)">${proj.tech}</div>
                                        <a href="#" class="project-link" ${isEditMode ? 'onclick="event.preventDefault();"' : ''}><span class="${editClass}" ${contentEditable} oninput="updateArrayItem('projects', ${i}, 'link', this.innerText)">${isEditMode ? proj.link : 'Voir le projet'}</span></a>
                                    </div>
                                `).join('')}
                            </div>
                            <button class="btn-action btn-add" onclick="addItem('projects')"><i class="fas fa-plus"></i> Ajouter un projet</button>
                        </section>

                        <section class="section">
                            <h2 class="section-title">üìä Mes Certifications</h2>
                            <div class="cert-grid">
                                ${cvData.certifications.map((cert, i) => `
                                    <div class="cert-item">
                                        ${delBtn('certifications', i)}
                                        <div class="cert-name ${editClass}" ${contentEditable} oninput="updateArrayItem('certifications', ${i}, 'name', this.innerText)">${cert.name}</div>
                                        <a href="#" class="cert-link" ${isEditMode ? 'onclick="event.preventDefault();"' : ''}>
                                            <i class="fas fa-external-link-alt"></i> 
                                            <span class="${editClass}" ${contentEditable} oninput="updateArrayItem('certifications', ${i}, 'link', this.innerText)">${isEditMode ? cert.link : 'Voir le certificat'}</span>
                                        </a>
                                    </div>
                                `).join('')}
                            </div>
                            <button class="btn-action btn-add" onclick="addItem('certifications')"><i class="fas fa-plus"></i> Ajouter une certification</button>
                        </section>

                        <section class="section">
                            <h2 class="section-title">Comp√©tences Techniques</h2>
                            <div class="tech-grid">
                                ${cvData.techSkills.map((skill, i) => `
                                    <div class="category-box">
                                        ${delBtn('techSkills', i)}
                                        <div class="category-title ${editClass}" ${contentEditable} oninput="updateArrayItem('techSkills', ${i}, 'cat', this.innerText)">${skill.cat}</div>
                                        <div class="category-content ${editClass}" ${contentEditable} oninput="updateArrayItem('techSkills', ${i}, 'tools', this.innerText)">${skill.tools}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <button class="btn-action btn-add" onclick="addItem('techSkills')"><i class="fas fa-plus"></i> Ajouter</button>
                        </section>

                        <section class="section">
                            <h2 class="section-title">Exp√©riences Professionnelles</h2>
                            ${cvData.experience.map((exp, i) => `
                                <div class="timeline-item">
                                    ${delBtn('experience', i)}
                                    <div class="job-title ${editClass}" ${contentEditable} oninput="updateArrayItem('experience', ${i}, 'role', this.innerText)">${exp.role}</div>
                                    <div class="company ${editClass}" ${contentEditable} oninput="updateArrayItem('experience', ${i}, 'company', this.innerText)">${exp.company}</div>
                                    <span class="date ${editClass}" ${contentEditable} oninput="updateArrayItem('experience', ${i}, 'date', this.innerText)">${exp.date}</span>
                                    <div class="description">
                                        <ul>
                                            ${exp.tasks.map((t, ti) => `<li class="${editClass}" ${contentEditable} oninput="updateTask(${i}, ${ti}, this.innerText)">${t}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            `).join('')}
                            <button class="btn-action btn-add" onclick="addItem('experience')"><i class="fas fa-plus"></i> Ajouter</button>
                        </section>

                        <section class="section">
                            <h2 class="section-title">Dipl√¥mes et Formations</h2>
                            ${cvData.education.map((edu, i) => `
                                <div class="timeline-item">
                                    ${delBtn('education', i)}
                                    <div class="job-title ${editClass}" ${contentEditable} oninput="updateArrayItem('education', ${i}, 'degree', this.innerText)">${edu.degree}</div>
                                    <div class="company ${editClass}" ${contentEditable} oninput="updateArrayItem('education', ${i}, 'school', this.innerText)">${edu.school}</div>
                                    <span class="date ${editClass}" ${contentEditable} oninput="updateArrayItem('education', ${i}, 'date', this.innerText)">${edu.date}</span>
                                </div>
                            `).join('')}
                            <button class="btn-action btn-add" onclick="addItem('education')"><i class="fas fa-plus"></i> Ajouter</button>
                        </section>
                    </main>
                </div>
            `;
            
            attachListeners();
        }

        // ==========================================
        // 5. EXPORT DATA (Include new password hash)
        // ==========================================
        function exportData() {
            // We explain to the user that we are copying the Hash, not the password itself.
            let exportScript = `// Remplacer le bloc existant avec ceci :\n` +
                               `let cvData = ${JSON.stringify(cvData, null, 4)};\n` +
                               `// Note: Si vous avez chang√© le mot de passe, mettez √† jour la variable adminHash plus bas avec : "${adminHash}"`;
            
            navigator.clipboard.writeText(exportScript).then(() => {
                alert("‚úÖ Code copi√© !\n\n1. Allez dans index.html\n2. Remplacez 'let cvData = ...'\n3. IMPORTANT: Si vous avez chang√© le mot de passe, n'oubliez pas de copier le nouveau Hash indiqu√© dans le texte copi√©.");
            }, (err) => {
                console.error('Erreur', err);
            });
        }

        // ==========================================
        // 6. CRYPTO & ADMIN LOGIC
        // ==========================================
        
        // Hashing Helper
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        // TOGGLE EDIT
        async function toggleEditMode() {
            if (document.documentElement.classList.contains('translated-ltr')) {
                alert("Attention : Impossible d'√©diter en mode traduction. Rafra√Æchissez la page.");
                return;
            }

            if (isEditMode) {
                isEditMode = false;
                document.body.classList.remove('editing');
            } else {
                const input = prompt("üîê Acc√®s Admin : Mot de passe");
                if (input !== null) {
                    const hashedInput = await sha256(input);
                    // Check against current active hash (from variable or localStorage)
                    if (hashedInput === adminHash) {
                        isEditMode = true;
                        document.body.classList.add('editing');
                    } else {
                        alert("‚ùå Mot de passe incorrect.");
                    }
                }
            }
            render();
        }

        // CHANGE PASSWORD (Saves to Browser Memory)
        async function changePassword() {
            const newPass = prompt("Entrez le nouveau mot de passe :");
            if(newPass) {
                const newHash = await sha256(newPass);
                adminHash = newHash; // Update memory
                localStorage.setItem('adminHash', newHash); // Update browser storage
                alert("‚úÖ Mot de passe chang√© (sur ce navigateur) !\n\nN'oubliez pas d'utiliser le bouton Sauvegarder pour r√©cup√©rer le code Hash si vous voulez le rendre permanent.");
            }
        }

        function attachListeners() {
            // PHOTO
            const photoInput = document.getElementById('photo-upload');
            const imgElement = document.getElementById('profile-img');
            const savedImage = localStorage.getItem('profilePhoto');
            if (savedImage && imgElement) imgElement.src = savedImage;
            if(photoInput) {
                photoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if(file && file.size < 3*1024*1024) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            if(imgElement) imgElement.src = e.target.result;
                            try { localStorage.setItem('profilePhoto', e.target.result); } catch(e){}
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }

            // CV PDF
            const cvInput = document.getElementById('cv-upload');
            const cvBtn = document.getElementById('cv-download-btn');
            const savedCV = localStorage.getItem('cvFile');
            if (savedCV && cvBtn && !isEditMode) cvBtn.href = savedCV;
            else if (!savedCV && cvBtn && !isEditMode) {
                cvBtn.style.opacity = "0.5";
                cvBtn.style.cursor = "not-allowed";
                cvBtn.onclick = (e) => { e.preventDefault(); alert("Aucun CV disponible."); };
            }
            if(cvInput) {
                cvInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if(file && file.size < 3*1024*1024) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            try {
                                localStorage.setItem('cvFile', e.target.result);
                                alert("CV sauvegard√© !");
                                render();
                            } catch (err) { alert("Erreur stockage."); }
                        };
                        reader.readAsDataURL(file);
                    } else { alert("Fichier trop gros (Max 3MB)"); }
                });
            }
        }

        // Initial Render
        render();

    </script>

    <script type="text/javascript">
        function googleTranslateElementInit() {
          new google.translate.TranslateElement({pageLanguage: 'fr', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>